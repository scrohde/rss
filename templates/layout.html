{{define "layout"}}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="htmx-config" content='{"allowEval":false,"includeIndicatorStyles":false}'>
  <title>Pulse RSS</title>
  {{if .CSRFToken}}
    <meta name="csrf-token" content="{{.CSRFToken}}">
  {{end}}
  <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
  <link rel="stylesheet" href="/static/styles.css">
  <script src="/static/vendor/htmx.min.js" defer></script>
  <script src="/static/app.js" defer></script>
</head>
<body>
  <div class="page">
    <header class="topbar">
      <div class="brand">
        <div class="brand-mark">o</div>
        <div>
          <div class="brand-title">Pulse RSS</div>
          <div class="brand-subtitle">Your compact feed cockpit</div>
        </div>
      </div>
      <form class="subscribe-form" hx-post="/feeds" hx-target="#subscribe-message" hx-swap="outerHTML">
        <input type="url" name="url" placeholder="https://example.com/rss" required>
        <button type="submit">Subscribe</button>
      </form>
      <div class="topbar-side">
        <div class="topbar-shortcuts" id="topbar-shortcuts">
          <button
            class="topbar-shortcuts-button"
            id="topbar-shortcuts-button"
            type="button"
            aria-label="Show menu"
            aria-controls="topbar-shortcuts-panel"
            aria-expanded="false"
          >
            <span class="topbar-shortcuts-icon" aria-hidden="true">
              <span></span>
              <span></span>
              <span></span>
            </span>
            <span class="sr-only">Menu</span>
          </button>
          <section class="topbar-shortcuts-panel" id="topbar-shortcuts-panel" aria-label="Keyboard shortcuts" hidden>
            <div class="topbar-shortcuts-title">Keyboard shortcuts</div>
            <div class="topbar-shortcuts-subtitle">Browse and manage items without leaving the keyboard.</div>
            <div class="topbar-shortcuts-grid">
              <div class="topbar-shortcuts-row">
                <span class="topbar-shortcuts-action">Next item</span>
                <span class="topbar-shortcuts-keys"><kbd>j</kbd><kbd>Down</kbd></span>
              </div>
              <div class="topbar-shortcuts-row">
                <span class="topbar-shortcuts-action">Previous item</span>
                <span class="topbar-shortcuts-keys"><kbd>k</kbd><kbd>Up</kbd></span>
              </div>
              <div class="topbar-shortcuts-row">
                <span class="topbar-shortcuts-action">Expand item</span>
                <span class="topbar-shortcuts-keys"><kbd>l</kbd><kbd>Right</kbd></span>
              </div>
              <div class="topbar-shortcuts-row">
                <span class="topbar-shortcuts-action">Collapse item</span>
                <span class="topbar-shortcuts-keys"><kbd>h</kbd><kbd>Left</kbd></span>
              </div>
              <div class="topbar-shortcuts-row">
                <span class="topbar-shortcuts-action">Open article</span>
                <span class="topbar-shortcuts-keys"><kbd>o</kbd><kbd>Enter</kbd></span>
              </div>
              <div class="topbar-shortcuts-row">
                <span class="topbar-shortcuts-action">Toggle read state</span>
                <span class="topbar-shortcuts-keys"><kbd>r</kbd></span>
              </div>
            </div>
            <div class="topbar-shortcuts-divider"></div>
            <div class="topbar-shortcuts-title topbar-shortcuts-title-secondary">Subscriptions</div>
            <div class="topbar-shortcuts-grid">
              <div class="topbar-shortcuts-row">
                <span class="topbar-shortcuts-action">Export feeds</span>
                <span class="topbar-shortcuts-keys">
                  <a class="topbar-shortcuts-control" href="/opml/export">Export OPML</a>
                </span>
              </div>
              <div class="topbar-shortcuts-row">
                <span class="topbar-shortcuts-action">Import feeds</span>
                <span class="topbar-shortcuts-keys">
                  <form
                    class="topbar-shortcuts-import-form"
                    hx-post="/opml/import"
                    hx-target="#subscribe-message"
                    hx-swap="outerHTML"
                    hx-encoding="multipart/form-data"
                  >
                    <button
                      class="topbar-shortcuts-control topbar-shortcuts-control-button"
                      type="button"
                      data-import-button="true"
                    >
                      Import OPML
                    </button>
                    <input
                      class="sr-only"
                      type="file"
                      name="file"
                      accept=".opml,text/xml,application/xml"
                      data-import-file-input="true"
                    >
                  </form>
                </span>
              </div>
            </div>
          </section>
        </div>
        <div id="subscribe-message" class="message"></div>
      </div>
    </header>

    <div class="app">
      <div class="sidebar-pane">
        <aside class="sidebar" id="feed-list">
          {{template "feed_list" .}}
        </aside>
      </div>

      <div class="content-pane">
        <main class="content" id="main-content">
          {{template "main" .}}
        </main>
      </div>
    </div>
  </div>
</body>
</html>
{{end}}
